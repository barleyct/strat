<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- Site CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- fonts -->
    <script defer src="fonts/js/all.min.js"></script>

    <title>Strategy& - Strategy threesixty - Category</title>
  </head>
  <body>

    <header>

      <!-- Logo -->
      <nav class="site-nav-logo navbar navbar-light bg-light">
        <div class="container">

          <a class="navbar-brand" href="index.html">
            <img src="images/co-brand-logo@1X.png" width="145" height="45" class="d-inline-block align-top" alt="">
            Strategy threesixty radar
          </a>

          <!-- client logo -->
          <a class="float-right" href="#">
            <img class="rounded-circle border" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2275%22%20height%3D%2275%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2075%2075%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_1675f575c26%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.1)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1675f575c26%22%3E%3Crect%20width%3D%2275%22%20height%3D%2275%22%20fill%3D%22white%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%2218.5546875%22%20y%3D%2242%22%3E75x75%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" width="145" height="45" class="d-inline-block align-top" alt="">
          </a>

        </div>
      </nav>

      <!-- Navigation -->
      <nav class="site-nav navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-item nav-link" href="index.html">Overview</a>
              <a class="nav-item nav-link active" href="details.html">Details</a>
              <a class="nav-item nav-link" href="archetypes.html">Archetypes</a>
              <a class="nav-item nav-link" href="consistency.html">Consistency</a>
              <a class="nav-item nav-link" href="demographics.html">Demographics</a>
              <a class="nav-item nav-link" href="#">Pulse Check</a>
            </div>
          </div>
        </div>
      </nav>

      <!--
      <nav class="site-sub-nav navbar navbar-light bg-light">
        <div class="container">
          <div class="gutter"></div>
          <div class="navbar-collapse">
            <div class="navbar-nav">
              <a class="nav-item nav-link active" href="#">Dashboard</a>
              <a class="nav-item nav-link" href="#">Insights</a>
            </div>
          </div>
        </div>
      </nav>
      -->

      <!-- Navigation: Sub Header -->
      <nav class="site-sub-nav">
        <div class="container">

          <div class="gutter"></div>
          <div class="nav nav--sub" role="tablist">
            <a class="nav-item nav-link" style="visibility: hidden; pointer-events: none; ">#######I</a>
            <a class="nav-item nav-link active" id="nav-cat-tab" data-toggle="tab" href="#nav-cat" role="tab" aria-controls="nav-cat" aria-selected="true">Categories</a>
            <span class="sep border-right"></span>
            <a class="nav-item nav-link" id="nav-questions-tab" data-toggle="tab" href="#nav-questions" role="tab" aria-controls="nav-questions" aria-selected="false">Questions</a>
          </div>

        </div>
      </nav>

    </header>


    <main class="mt-2">

      <div class="container">

        <div class="row">

          <!-- Side Panel -->
          <div class="col-3 js-detail-sidepanel">

            <!-- Filters -->
            <div class="sidepanel sidepanel--filter clearfix js-filter-panel">
              <div class="dropdown-menu show">
                <h6 class="dropdown-header">Filter for:</h6>
                <div class="dropright">
                  <!-- TODO: On button click, toggle the checkbox :checked attribute -->
                  <button type="button" class="dropdown-item md-cb active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <input type="checkbox" value="year" checked /> <label>Year</label>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu--submenu">
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="2018" checked /> <label>2018</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="2017" /> <label>2017</label>
                    </button>
                  </div>
                  <div class="dropdown-item-selection active">
                    <span class="dropdown-item-text">2018</span>
                  </div>
                </div>
                <div class="dropright">
                  <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <input type="checkbox" value="org_unit" /> <label>Org. Unit</label>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu--submenu">
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="Commodity Checmicals" /> <label>Commodity Checmicals</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="Speciality Checmicals" /> <label>Speciality Checmicals</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="Agro Checmicals" /> <label>Agro Checmicals</label>
                    </button>
                  </div>
                  <div class="dropdown-item-selection active"></div>
                </div>
                <div class="dropright">
                  <button type="button" class="dropdown-item md-cb active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <input type="checkbox" value="management" checked /> <label>Management Level</label>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu--submenu">
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="C-Level" checked /> <label>C-Level</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="Middle Management" checked /> <label>Middle Management</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="Low Management" /> <label>Low Management</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="Staff" /> <label>Staff</label>
                    </button>
                  </div>
                  <div class="dropdown-item-selection active">
                    <span class="dropdown-item-text">C-Level</span>
                    <span class="dropdown-item-text">Middle Management</span>
                  </div>
                </div>
                <div class="dropright">
                  <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <input type="checkbox" value="geography" /> <label>Geography</label>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu--submenu"></div>
                  <div class="dropdown-item-selection active"></div>
                </div>
                <div class="dropright">
                  <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <input type="checkbox" value="tenure" /> <label>Tenure</label>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu--submenu">
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="0-1 year" /> <label>0-1 year</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="1-3 year" /> <label>1-3 year</label>
                    </button>
                    <button class="dropdown-item md-cb" type="button">
                      <input type="checkbox" value="3+ year" /> <label>3+ year</label>
                    </button>
                  </div>
                  <div class="dropdown-item-selection active"></div>
                </div>
              </div>
            </div>

            <!-- Categories -->
            <div class="sidepanel sidepanel--breakdownby clearfix js-breakdownby-panel">
              <div class="dropdown-menu show">
                <h6 class="dropdown-header">Breakdown by:</h6>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="breakdown_by" value="year" /> <label>Year</label>
                  <span class="md-cb__unset js-md-cb-reset">&times;</span>
                </button>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="breakdown_by" value="org_unit" /> <label>Org. Unit</label>
                  <span class="md-cb__unset js-md-cb-reset">&times;</span>
                </button>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="breakdown_by" value="management" /> <label>Management Level</label>
                  <span class="md-cb__unset js-md-cb-reset">&times;</span>
                </button>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="breakdown_by" value="tenure" checked /> <label>Tenure</label>
                  <span class="md-cb__unset js-md-cb-reset">&times;</span>
                </button>
              </div>
            </div>

            <!-- Sort By -->
            <div class="sidepanel sidepanel--sortby hide clearfix js-sortby-panel js-tab-question-controls">
              <div class="dropdown-menu show">
                <h6 class="dropdown-header">Sort by:</h6>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="sort_by" value="category" checked /> <label>Category</label>
                </button>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="sort_by" value="number" /> <label>Number</label>
                </button>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="sort_by" value="performance-b2w" /> <label>Performance<br>(best to worst)</label>
                </button>
                <button type="button" class="dropdown-item md-cb md-cb--radio">
                  <input type="radio" name="sort_by" value="performance-w2b" /> <label>Performance<br>(worst to best)</label>
                </button>
              </div>
            </div>

            <!-- Trigger Modals -->
            <div class="sidepanel sidepanel--action clearfix js-action-panel">

              <div class="dropdown-menu show">

                <button type="button" class="dropdown-item js-show-modal js-tab-category-controls" data-type="categories" data-toggle="modal" data-target="#modalCategories">
                  <i class="far fa-eye"></i>
                  <label>Show/Hide Categories</label>
                </button>

                <button type="button" class="dropdown-item js-show-modal js-tab-question-controls hide" data-type="questions-list" data-toggle="modal" data-target="#modalAllQuestionFilter">
                  <i class="far fa-eye"></i>
                  <label>Show/Hide Questions</label>
                </button>

              </div>
              
            </div>

          </div>

          <div class="col-9">

            <!-- Tabbed Content -->
            <div class="tab-content">

              <!-- Categories -->
              <div class="tab-pane fade show active" id="nav-cat" role="tabpanel" aria-labelledby="nav-cat-tab">

                <p class="mb-3">
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                  quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                  consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                  cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                  proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>

                <h5 class="alert alert--head bg-red pl-3" role="alert">Categories</h5>

                <!-- Graph -->
                <div class="js-graph-categories ml-3" id="categories_list"></div>
                
              </div>

              <!-- Questions -->
              <div class="tab-pane fade" id="nav-questions" role="tabpanel" aria-labelledby="nav-questions-tab">

                <p>
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                  tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                  quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                  consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                  cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                  proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>

                <!-- Graph -->
                <div class="js-graph-questions" id="questions_list"></div>
                
              </div>

            </div>
            
          </div>
          
        </div>
        
      </div>

      <!-- Camera Button -->
      <button class="btn btn-camera js-btn-camera js-tab-question-controls hide" data-target="#questions_list">
        <i class="fas fa-camera" aria-hidden="true"></i>
      </button>

      <!-- Camera Button -->
      <button class="btn btn-camera js-btn-camera js-tab-category-controls" data-target="#categories_list">
        <i class="fas fa-camera" aria-hidden="true"></i>
      </button>
      
    </main>

    <!-- Site Footer -->
    <footer>

      <div class="container">

        <p>© 2018 PwC. All rights reserved. PwC refers to the PwC network and/or one or more of its member firms, each of which is a separate legal entity. Please see <a href="www.pwc.com/structure">www.pwc.com/structure</a> for further details.</p>

        <nav class="nav">
          <a class="nav-link pl-0" href="#">Privacy policy</a>
          <a class="nav-link" href="#">Terms of use</a>
          <a class="nav-link" href="#">Cookies info</a>
          <a class="nav-link" href="#">About site provider</a>
        </nav>
        
      </div>
      
    </footer>


    <!-- Modals -->

    <!-- 1. Categories Modal -->
    <div class="modal fade js-modal-inclusive js-tab-category-controls" id="modalCategories" tabindex="-1" role="dialog" aria-labelledby="modalCategoriesTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalCategoriesTitle">Show/Hide Categories</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body p-0">
            
            <div class="container-fluid p-0">
              
              <div class="row justify-content-center m-0">
                                
                <div class="col sidepanel sidepanel--category clearfix m-0 p-0 js-category-panel">

                  <div class="dropdown-menu show m-0 border-0">
                    <h6 class="dropdown-header">Categories:</h6>
                    
                    <button type="button" class="dropdown-item md-cb">
                      <input type="checkbox" checked value="strategythreesixty">
                      <label>Strategy threesixty</label>
                    </button>

                    <button type="button" class="dropdown-item md-cb">
                      <input type="checkbox" checked value="Value Proposition">
                      <label>Value Proposition</label>
                    </button>

                    <button type="button" class="dropdown-item md-cb">
                      <input type="checkbox" checked value="Capabilities">
                      <label>Capabilities</label>
                    </button>

                    <button type="button" class="dropdown-item md-cb">
                      <input type="checkbox" checked value="Portfolio">
                      <label>Portfolio</label>
                    </button>

                    <button type="button" class="dropdown-item md-cb">
                      <input type="checkbox" checked value="Leadership">
                      <label>Leadership</label>
                    </button>

                    <button type="button" class="dropdown-item md-cb">
                      <input type="checkbox" checked value="Impact">
                      <label>Impact</label>
                    </button>

                    
                  </div>
                                  
                </div>
                                
              </div>
              
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Save changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 2. Questions Modal -->
    <div class="modal modal-fs fade js-tab-question-controls hide" id="modalAllQuestionFilter" tabindex="-1" role="dialog" aria-labelledby="modalAllQuestionFilterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

          <div class="modal-header border-0">
            <h5 class="modal-title" id="modalAllQuestionFilterTitle">Show/Hide Questions</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            
            <div class="container-fluid p-0">
              
              <div class="row">
                                
                <div class="col-md-auto">

                  <!-- Categories -->
                  <div class="sidepanel sidepanel--category sidepanel--selectlist js-non-iteractive js-category-question-panel">

                    <div class="dropdown-menu show m-0 border-0" id="select_categories_list">
                      <!-- populated using template -->
                    </div>
                                    
                  </div>
                                  
                </div>

                <div class="col p-0">

                  <div class="fixflex">

                    <div class="row justify-content-between fixflex__fix">
                        
                      <div class="col">
                        <h5>Questions</h5>
                      </div>

                      <div class="col text-right p-0">
                        <a href="#" class="text-danger js-btn-question-selection" data-checked="true">Select all</a>
                        <span class="sep border-right"></span>
                        <a href="#" class="text-danger js-btn-question-selection" data-checked="false">Unselect all</a>
                      </div>


                    </div>
                 
                    <!-- Question and its Graph -->
                    <div class="fixflex fixflex__flex">
                      <div class="fixflex__flex js-modal-allquestion">

                        <!-- Questions Container -->
                        <div class="questions-list" id="select_questions_list">

                          <!-- Populated using template -->
                          
                        </div>
                        
                      </div>

                      <div class="fixflex__fix footer">
                        <button type="button" class="btn btn-danger js-save-question-selection" data-dismiss="modal">Save changes</button>
                      </div>

                    </div>

                  </div>

                </div>
              
              </div>

            </div>
          
          </div>
        </div>
      </div>

    </div>

    <!-- 3. Single Question Modal with Panel -->
    <div class="modal modal-fs fade" id="modalQuestionFilter" tabindex="-1" role="dialog" aria-labelledby="modalQuestionFilterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

          <div class="modal-header border-0">
            <h5 class="modal-title pl-3">Free form answers</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>

          <div class="modal-body">
            
            <div class="container-fluid">
              
              <div class="row">
                                
                <div class="col-md-auto">

                  <!-- Filters -->
                  <div class="sidepanel sidepanel--filter clearfix js-filter-panel">
                    <div class="dropdown-menu show">
                      <h6 class="dropdown-header">Filter for:</h6>
                      <div class="dropright">
                        
                        <button type="button" class="dropdown-item md-cb active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <input type="checkbox" value="year" checked /> <label>Year</label>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu--submenu">
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="2018" checked /> <label>2018</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="2017" /> <label>2017</label>
                          </button>
                        </div>
                        <div class="dropdown-item-selection active">
                          <span class="dropdown-item-text">2018</span>
                        </div>
                      </div>
                      <div class="dropright">
                        <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <input type="checkbox" value="org_unit" /> <label>Org. Unit</label>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu--submenu">
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="Commodity Checmicals" /> <label>Commodity Checmicals</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="Speciality Checmicals" /> <label>Speciality Checmicals</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="Agro Checmicals" /> <label>Agro Checmicals</label>
                          </button>
                        </div>
                        <div class="dropdown-item-selection active"></div>
                      </div>
                      <div class="dropright">
                        <button type="button" class="dropdown-item md-cb active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <input type="checkbox" value="management" checked /> <label>Management Level</label>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu--submenu">
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="C-Level" checked /> <label>C-Level</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="Middle Management" checked /> <label>Middle Management</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="Low Management" /> <label>Low Management</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="Staff" /> <label>Staff</label>
                          </button>
                        </div>
                        <div class="dropdown-item-selection active">
                          <span class="dropdown-item-text">C-Level</span>
                          <span class="dropdown-item-text">Middle Management</span>
                        </div>
                      </div>
                      <div class="dropright">
                        <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <input type="checkbox" value="geography" /> <label>Geography</label>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu--submenu"></div>
                        <div class="dropdown-item-selection active"></div>
                      </div>
                      <div class="dropright">
                        <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <input type="checkbox" value="tenure" /> <label>Tenure</label>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu--submenu">
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="0-1 year" /> <label>0-1 year</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="1-3 year" /> <label>1-3 year</label>
                          </button>
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value="3+ year" /> <label>3+ year</label>
                          </button>
                        </div>
                        <div class="dropdown-item-selection active"></div>
                      </div>
                      <div class="dropright hide">
                        <button type="button" class="dropdown-item md-cb" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <input type="checkbox" value="question" checked /> <label>Question</label>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu--submenu">
                          <button class="dropdown-item md-cb" type="button">
                            <input type="checkbox" value=""  /> <label></label>
                          </button>
                        </div>
                        <div class="dropdown-item-selection active">
                          <!-- When a question is clicked on the Graph, its key is placed here -->
                          <span class="dropdown-item-text" id="selected_question"></span>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>

                <div class="col">

                  <div class="row">

                    <p class="text-justify col"><b class="mr-1">How to use:</b> Ambitioni dedisse scripsisse iudicaretur. Cras mattis iudicium purus sit amet fermentum. Donec sed odio operae, eu vulputate felis rhoncus. Praeterea iter est quasdam res quas ex communi. At nos hinc posthac, sitientis piros Afros. Petierunt uti sibi concilium totius Galliae in diem certam indicere. Cras mattis iudicium purus sit amet fermentum.</p>
                    
                  </div>
                 
                  <!-- Question and its Graph -->
                  <div class="js-modal-question graph-single-question" id="ff_questions_list">
                    
                  </div>

              </div>
              
            </div>
          </div>
          
          </div>
        </div>
      </div>
    </div>


    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.3.1.slim.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/d3.5.7.0.min.js"></script>
    <script src="js/d3-legend.min.js"></script>
    <script src="js/mustache.min.js"></script>
    <script src="js/jspdf.min.js"></script>
    <script src="js/html2canvas.min.js"></script>
    <script src="js/main.js"></script>

    <!-- Template for question listing in the Show/Hide Questions modal -->
    <script id="tpl_question_list" type="text/html">

      <table class="table table-striped">
        <tbody>
          {{#questions}}
          <tr>
            <th scope="row">
              <button type="button" class="btn btn-transparent md-cb" data-qid="{{qid}}">
                <input type="checkbox" {{#active}}checked{{/active}} data-qid="{{qid}}">
                <label>Q{{qid}}</label>
              </button>
            </th>
            <td>{{question}}</td>
          </tr>
          {{/questions}}
        </tbody>
      </table>
      
    </script>

    <!-- List of categories in the Show/Hide Questions modal -->
    <script id="tpl_category_list" type="text/html">
      <h6 class="dropdown-header">Categories:</h6>
      {{#categories}}
      <button type="button" class="dropdown-item md-cb" data-active-qid="{{#value}}{{activeQid}}{{/value}}">
        <input type="checkbox" checked value="{{key}}">
        <label>{{key}}</label>
        {{#value}}
        <label class="q-count">({{activeCount}}/{{totalCount}})</label>
        {{/value}}
        <i class="fas fa-chevron-right"></i>
      </button>
      {{/categories}}

    </script>

    <!-- Template for a single Category list -->
    <script id="tpl_category" type="text/html">

      {{#categories}}

      <div id="id-{{qid}}">

        <h5 class="mb-3 font-weight-bold position-relative">{{key}}
          <button class="btn btn-download" style="right: 3rem;" data-html2canvas-ignore>
            <i class="fas fa-search"></i>
          </button>
          <button class="btn btn-download" data-target="#id-{{qid}}" data-html2canvas-ignore>
            <i class="fas fa-arrow-down"></i>
          </button>
        </h5>

        <div class="gq pb-4">

          <!-- Breakdown By Rows -->
          {{#values}}
          <div class="row gq-tuple align-items-center" data-id="{{qid}}-{{kid}}">
            <div class="col-3 gq-tuple__title">
              <label>{{key}}</label>
            </div>
            <div class="col gq-tuple__graph">

              <figure class="percentage-graph row align-items-center">
                
                <div class="percentage-graph__bar {{#isAll}}percentage-graph__bar--all{{/isAll}}" style="-ms-flex: 0 0 {{width}};flex: 0 0 {{width}};max-width: {{width}};">
                  <div class="percentage-graph__bar-bg" style="background: {{fill}};">
                    <label class="percentage-graph__bar-value" style="color: {{color}};">{{value}}</label>
                  </div>
                </div>

                <div class="hl-indicator ml-4 pl-1">
                  <span class="hl-indicator__figure mr-0">{{movementValue}}</span>
                  <i class="hl-indicator__indicator text-{{movementClass}}">{{#movement}}▲{{/movement}}{{^movement}}▼{{/movement}}</i>
                  <span>vs.</span>
                  <span class="hl-indicator__year">{{prevYear}}</span>
                </div>

              </figure>

            </div>
          </div>
          {{/values}}

        </div>

      </div>

      {{/categories}}
      
    </script>

    <!-- Template for a single question -->
    <script id="tpl_question" type="text/html">

      {{#questions}}

        <div class="alert alert--head" data-category="{{key}}" role="alert">{{key}}</div>

        {{#values}}
        <div class="gq ml-3 {{^isMultipart}}pb-3{{/isMultipart}}" id="qid-{{qid}}">

          <h5 class="gq__title pr-5 {{#isFreeform}}mb-3{{/isFreeform}}">
            <b>Q{{srno}}:</b>{{key}}
            {{^isFreeform}}
            <button class="btn btn-download" data-target="#qid-{{qid}}" data-html2canvas-ignore>
              <i class="fas fa-arrow-down"></i>
            </button>
            {{/isFreeform}}
          </h5>

          <!-- Breakdown By Statements -->

          <!-- 1. Question Type - multipart -->
          {{#isMultipart}}

            {{#values}}
              <h6 class="gq__subtitle">
                <b>{{key}}</b>
              </h6>

              <!-- Breakdown by: -->
              {{#values}}
              <div class="row gq-tuple pb-2 align-items-center" data-id="{{qid}}-{{kid}}">
                <div class="col-3 gq-tuple__title">
                  <label>{{key}}</label>
                </div>
                <div class="col gq-tuple__graph">
                  
                </div>
              </div>
              {{/values}}

            {{/values}}

            <!-- Legend -->
            <div class="row gq-tuple" data-id="{{qid-kid}}">
              <div class="col-3"></div>
              <div class="col gq-tuple__legend"></div>
            </div>

          {{/isMultipart}}

          <!-- 2. Question Type - apply -->
          {{#isApply}}

            {{#values}}
              <h6 class="gq__subtitle mt-3">
                <b>{{key}}</b>
              </h6>

              <!-- Breakdown by: -->
              {{#values}}
              <div class="row gq-tuple align-items-center" data-id="{{qid}}-{{kid}}">
                <div class="col-3 gq-tuple__title">
                  <label>{{key}}</label>
                </div>
                <div class="col gq-tuple__graph">

                  <figure class="percentage-graph row align-items-center">
                    
                    <div class="percentage-graph__bar {{#isAll}}percentage-graph__bar--all{{/isAll}}" style="-ms-flex: 0 0 {{width}};flex: 0 0 {{width}};max-width: {{width}};">
                      <div class="percentage-graph__bar-bg" style="background: {{fill}};">
                        <label class="percentage-graph__bar-value" style="color: {{color}};">{{value}}</label>
                      </div>
                    </div>

                  </figure>

                </div>
              </div>
              {{/values}}

            {{/values}}

          {{/isApply}}

          <!-- 3. Question Type - freeform -->
          {{#isFreeform}}

          <div class="row gq-tuple" data-id="{{qid-kid}}">
            <div class="col">
              <a href="javascript:;" class="text-color-red text-underline js-show-freeform-modal" data-id="{{key}}">See free form answers</a>
            </div>
          </div>

          {{/isFreeform}}

        </div>
        {{/values}}

      {{/questions}}
      
    </script>

    <!-- Template for free form question -->
    <script id="tpl_question_freeform" type="text/html">

      {{#data}}

        <div class="alert alert-secondary pr-5" role="alert">
          <b class="mr-2">Q{{srno}}:</b>{{key}}
          <button class="btn btn-download js-btn-camera" data-target="#ff_questions_list_wrapper">
            <i class="fas fa-arrow-down"></i>
          </button>
        </div>

        <div class="ff-question-wrapper" id="ff_questions_list_wrapper" data-html2canvas-ignore-maxheight>

        {{#questions}}

          <div class="alert alert--head mt-3" data-category="{{key}}" role="alert">{{key}}</div>

          {{#values}}

            {{#values}}

            <div class="gq p-3 m-0">

              <h6><b>User feedback {{srno}}</b></h6>

              <!-- Feedback -->
              <ul class="m-0">
              {{#feedback}}
                <li>{{.}}</li>
              {{/feedback}}
              </ul>
              
            </div>

            {{/values}}

          {{/values}}

        {{/questions}}

        </div>

      {{/data}}
      
    </script>

    <script type="text/javascript">

      $(function(){

        var bDrawQuestionsTabGraph = false,
        aDataset = null,
        edispatch = d3.dispatch('dataLoaded', 'tabOpened');

        // Read data File
        // 
        d3.json('data/data-new.json').then(function(data, error){
          if (error) {
            alert('Error reading data file.');
            return;
          }
          aDataset = data;

          edispatch.call('dataLoaded', null, data);
        });
        
        // Toggle Filter panels based on select tab: Categories or Insights
        // 
        $('.nav--sub a[data-toggle="tab"]').on('shown.bs.tab', function (e) {

          $('.js-tab-category-controls').toggleClass('hide');
          $('.js-tab-question-controls').toggleClass('hide');

          edispatch.call('tabOpened', null, $(this).attr('href'));

          updatePageTitle($(this).text());

        });


        // Draw Questions Graph;
        // 
        edispatch.on('tabOpened', function(sTabId){

          // Questions Tab
          // 
          if (sTabId == '#nav-questions') {
            bDrawQuestionsTabGraph = true;
          }else{  // Details tab
            bDrawQuestionsTabGraph = false;
          }

          // get active filters
          dispatch.call('getPanelSettings');

        });

        // On Data Loaded
        // 
        edispatch.on('dataLoaded', function(data){
          // get active filters
          // 
          dispatch.call('getPanelSettings');
        });

        // On Filter Change
        // 
        dispatch.on('filter.questions', function(oSettings){

          if (!aDataset){
            return false;
          }

          // If Modal is open, Selected question tab
          // 
          if ($('#modalQuestionFilter.show').length) {

            // Filter the raw dataset and update
            // 
            drawQuestionModalGraph(filterData(aDataset, oSettings));

          }else if (!bDrawQuestionsTabGraph) {
            // If Details Tab
            //

            // Update the graph based on new settings
            // 
            var aBreakdownBy = ['category', oSettings.breakdownBy];

            // Filter the raw dataset and update
            // 
            drawDetailsTabGraphs(filterData(aDataset, oSettings), aBreakdownBy);

            fixSVGIconFill();

          }else{ 

            // If Question Tab
            // 

            // Update the graph based on new settings
            // 
            //var aBreakdownBy = ['category', 'question', oSettings.breakdownBy, 'response'];

            // Filter the raw dataset and update
            // 
            drawQuestionsTabGraphs(filterData(aDataset, oSettings), oSettings.breakdownBy);

          }


        });

        function bindQuestionClick() {

          $(".js-show-freeform-modal")
          .off('click')
          .on('click', function(){

            showFreeformQuestion.bind(this)();

          });
          
        }

        // Open freeform question details modal
        // 
        function showFreeformQuestion() {

          var id = $(this).data('id');

          console.log('question clicked', id);

          // assign this id in the Filter panel
          // to enable data filtering
          // 
          $('#selected_question').html(id);

          // open the modal
          $('#modalQuestionFilter').modal('show');

          // trigger filter after modal is visible
          $('#modalQuestionFilter').off('shown.bs.modal');
          $('#modalQuestionFilter').on('shown.bs.modal', triggerFilter);

          function triggerFilter() {
            dispatch.call('getPanelSettings');
          }

        }


        /**
         * Draw graphs for Questions tab
         * @param  {array of Objects} data dataset
         */
        function drawQuestionsTabGraphs(data, sBreakdownBy) {

          var oConfig,
          tpl = $('#tpl_question').html(),
          qData = [],
          qDataMap = {},
          target = $('#questions_list'),
          tData,
          format = d3.format('.0%');

          function parseData(aData) {
            // Assign a unique id to every question
            // 
            var i = 0,
            j = 0,
            key;

            return aData.map(function(cat){

              cat.values = cat.values.map(function(q, srno){
                q.qid = 'q-'+ ++i;
                q.srno = srno+1;

                // assign question type
                q.isFreeform = q.qType == 'freeform';
                q.isMultipart = q.qType == 'multipart';
                q.isApply = q.qType == 'apply';

                // for each statement
                q.values = q.values.map(function(s){

                  // 1. Question type - multipart
                  // 
                  if (q.isMultipart) {

                    // Assign an Id to every Key
                    // Add a key for 'All'
                    // 
                    var iMaxKeyCount = d3.max(s.values, function(d){ return d.values.length; }),
                    iMaxKeys,
                    oAll;

                    // Find out index of max keys
                    // 
                    s.values.forEach(function(d, i){
                      iMaxKeys = d.values.length == iMaxKeyCount ? i : iMaxKeys;
                    });

                    oAll = {
                      key: 'All',
                      isAll: true,
                      values: s.values[iMaxKeys].values.map(function(d){ return {key: d.key, value: 0}; })
                    };

                    s.values.unshift(oAll);

                    s.values.map(function(k){

                      k.kid = 'k-'+ ++j;

                      key = q.qid + '-' + k.kid;
                      
                      qDataMap[key] = {
                        category: cat.key,
                        isAll: k.isAll,
                        isMultipart: true,
                        values: k.values
                      };

                      // Add values to 'All' Key
                      if (k.key != 'All') {
                        k.values.forEach(function(kv, z){
                          oAll.values[z].value += kv.value;
                        });
                      }

                      return k;

                    });

                    // filter undefined key
                    s.values = s.values.filter(function(d){
                      return d.key != 'undefined';
                    });

                  }

                  // 2. Question type - apply
                  // 
                  if (q.isApply) {


                    // Assign an Id to every Key
                    // Add a key for 'All'
                    // 
                    var value = Math.random();

                    var oAll = {
                      key: 'All',
                      isAll: true,
                      value: format(value),
                      width: format(value * .7), // 70% of the total width
                      fill: categoryColorMap[cat.key][2]
                    };

                    s.values.unshift(oAll);

                    s.values = s.values.map(function(k){

                      k.kid = 'k-'+ ++j;

                      key = q.qid + '-' + k.kid;
                      
                      qDataMap[key] = {
                        category: cat.key,
                        isAll: k.isAll,
                        isApply: true,
                        values: [{key: 'response', value: k.value}]
                      };

                      // Graph Data
                      // 
                      var gd = {
                        // Breakdown by Key
                        key: k.key,
                        kid: k.kid,
                        isAll: k.isAll,
                        // Percentage value
                        value: format(value = Math.random()),
                        width: format(value * .7),
                        // background color
                        fill: categoryColorMap[cat.key][2],
                        // color 
                        // for less than 5%, color as black otherwise white
                        color: value < .05 ? '#222' : '#fff',
                      }

                      return gd;

                    });

                    // filter undefined key
                    s.values = s.values.filter(function(d){
                      return d.key != 'undefined';
                    });                    
                  }

                  // 3. Question type - freeform
                  // 

                  return s;

                });

                return q;
              });

              return cat;

            });

          }

          qData = parseData(getStructuredQuestionData(data, sBreakdownBy));

          tData = {
            questions: qData
          };

          Mustache.parse(tpl);

          // Add HTML
          target.html(Mustache.render(tpl, tData));

          // Render Charts
          // 
          var aLegendData = [];
          target.find('.gq-tuple').each(function(){

            var row = $(this),
            id = row.data('id'),
            data = qDataMap[id],  // generateData(),
            el = row.find('.gq-tuple__graph'),
            elLegend = row.find('.gq-tuple__legend'),
            isGraph = !!el.length,
            isLegend = !!elLegend.length;
            
            if (isGraph && data.isMultipart) {

              // Question type: multipart
              // 
              StackedBar( oConfig = {
                el: el[0],
                width: el.width(),
                barHeight: 25,
                isAll: data.isAll,
                data: data.values,
                category: data.category,
                colors: categoryColorMap[data.category]
              });
              // choose the data with max keys
              aLegendData = aLegendData.length < data.values.length ? data.values : aLegendData;

            }else if (isLegend) {

              drawLegend({
                el: elLegend[0],
                data: aLegendData,
                colors: categoryColorMap[oConfig.category],
                shapePadding: elLegend.width() / aLegendData.length
              });

            }

          });

          // Color the Category headings
          // 
          target.find('.alert[data-category]').each(function(){
            var colors = categoryColorMap[$(this).data('category')];
            // last color of the pallete
            // 
            $(this).css('background', colors ? colors[2] : 'gray');

          });

          bindQuestionClick();

          initDownloadHook();

        }

        /**
         * Draw graphs for Details tab
         * @param  {array of Objects} data dataset
         */
        function drawDetailsTabGraphs(data, aBreakdownBy) {

          var oConfig,
          tpl = $('#tpl_category').html(),
          qData = [],
          qDataMap = {},
          target = $('#categories_list'),
          tData,
          format = d3.format('.0%');

          function parseData(aData) {
            // Assign a unique id to every question
            // 
            var i = 0,
            j = 0,
            key;

            return aData.map(function(cat, srno){

              cat.qid = 'c-'+ ++i;
              cat.srno = srno+1;

              
              // Add a key for 'All'
              // 
              var value = Math.random();

              var oAll = {
                key: 'All',
                isAll: true,
                value: format(value),
                width: format(value * .7), // 70% of the total width
                fill: categoryColorMap[cat.key][2],
                color: value < .05 ? '#222' : '#fff',
                // movement details
                // if up, true otherwise false
                movement: value < .5 ? false : true,
                // 'success' for positive value otherwise 'danger'
                movementClass: value < .5 ? 'danger' : 'success',
                // movement value in percentage
                movementValue: '10%',
                prevYear: 2017
              };

              cat.values = cat.values.map(function(k){

                k.kid = 'k-'+ ++j;

                key = cat.qid + '-' + k.kid;
                
                qDataMap[key] = {
                  category: cat.key,
                  values: [{key: 'response', value: k.value}]
                };

                // Graph Data
                // 
                var gd = {
                  // Breakdown by Key
                  key: k.key,
                  // Percentage value
                  value: format(value = Math.random()),
                  width: format(value * .7),
                  // background color
                  fill: categoryColorMap[cat.key][2],
                  // color 
                  // for less than 5%, color as black otherwise white
                  color: value < .05 ? '#222' : '#fff',

                  // movement details
                  // if up, true otherwise false
                  movement: value < .5 ? false : true,
                  // 'success' for positive value otherwise 'danger'
                  movementClass: value < .5 ? 'danger' : 'success',
                  // movement value in percentage
                  movementValue: '10%',
                  // previous year
                  prevYear: 2017
                }

                return gd;

              });

              cat.values.unshift(oAll);

              // filter undefined key
              cat.values = cat.values.filter(function(d){
                return d.key != 'undefined';
              });

              return cat;

            });

          }

          qData = parseData(getStructuredData(data, aBreakdownBy));

          tData = {
            categories: qData
          };

          Mustache.parse(tpl);

          // Add HTML
          target.html(Mustache.render(tpl, tData));

          initDownloadHook();

        }

        /**
         * Draw graphs for Selected Question modal
         * @param  {array of Objects} data dataset
         */
        function drawQuestionModalGraph(data, aBreakdownBy) {

          var oConfig,
          tpl = $('#tpl_question_freeform').html(),
          qData = [],
          qDataMap = {},
          target = $('#ff_questions_list'),
          tData,
          qKey,
          qID;

          function parseData(aData) {
            // Assign a unique id to every question
            // 
            var i = 0,
            key;

            return aData.map(function(cat){

              cat.values = cat.values.map(function(q){

                qKey = q.key;

                // for every feedback
                q.values = q.values.map(function(k, j){

                  qID = k.qid;

                  // add serial no
                  k.srno = j + 1;

                  return k;

                }).filter(function(q){
                  return q.feedback && q.feedback.length;
                });

                return q;

              });

              return cat;

              
            });

          }

          qData = parseData(getStructuredQuestionData(data));

          tData = {
            data: {
              key: qKey,
              srno: qID,
              questions: qData
            }
          };

          Mustache.parse(tpl);

          // Add HTML
          target.html(Mustache.render(tpl, tData));

          // Color the Category headings
          // 
          target.find('.alert[data-category]').each(function(){
            var colors = categoryColorMap[$(this).data('category')];
            // last color of the pallete
            // 
            $(this).css('background', colors ? colors[2] : 'gray');

          });

          initDownloadHook();


        }

      });

      initQuestionSelection();

      function initQuestionSelection() {

        var aQuestionDataset;
        
        // Read questions data File
        // 
        d3.json('data/question-data.json').then(function(data, error){
          if (error) {
            alert('Error reading question data file.');
            return;
          }
          aQuestionDataset = data;

          // edispatch.call('dataLoaded', null, data);
          console.log('question data', data);
        
          // Parse the dataset
          // Find category wise questions
          var categoryWiseStats = d3.nest(aQuestionDataset)
            .key(function(d){ return d.category; })
            .rollup(function(q){ 
              return {
                activeCount: q.filter(function(d){ return d.active; }).length,
                totalCount: q.length,
                activeQid: q.filter(function(d){ return d.active; }).map(function(d){ return d.qid }).join(',')
              }; 
            })
            .entries(aQuestionDataset),

          categoryWiseQuestions = d3.nest(aQuestionDataset)
            .key(function(d){ return d.category; })
            .entries(aQuestionDataset);

          var categoryWiseQuestionsMap = d3.map(categoryWiseQuestions, function(d){ return d.key });


          console.log('question data', categoryWiseStats, categoryWiseQuestions);

          // Render HTML
          // 

          // 1. List Categories
          // 
          var tpl = $('#tpl_category_list').html();
          $('#select_categories_list').html(Mustache.render(tpl, {
            categories: categoryWiseStats
          }));

          // When a category is selected, show its questions
          // 
          $('.js-category-question-panel .dropdown-item').on('click', function cqpiClick(e) {

            // get category
            var sCategory = $(this).find('input').val(),
            bChecked = $(this).find('input').prop('checked'),
            sQid = $(this).attr('data-active-qid'),
            // get active questions ids
            aActiveQid = !!sQid ? sQid.split(',') : [];

            // if not active, show its questions
            if (!$(this).hasClass('active')) {

              $(this).toggleClass('active');

              // List Questions
              // 
              var tpl = $('#tpl_question_list').html(),
              aQuestions = categoryWiseQuestionsMap.get(sCategory).values,
              aMarkedQuestions = aQuestions.map(function(q){
                q.active = aActiveQid.indexOf(q.qid.toString()) > -1;
                return q;
              });

              $('#select_questions_list').html(Mustache.render(tpl, {
                questions: aMarkedQuestions
              }));

              // bind change
              $('#select_questions_list input').off('change')
              .on('change', function(){

                updateQuestionCount();

                updateQuestionSelection();

              });

            }

            // only one can be active at a time
            //
            $(this).siblings().removeClass('active');

          });
          // show first category questions
          $($('.js-category-question-panel .dropdown-item')[0]).trigger('click');

          // When a category is selected, show its questions
          // 
          $('.js-category-question-panel .dropdown-item input').on('click', function cqpiClick(e) {

            e.stopPropagation();
            
            var bChecked = $(this).prop('checked');

            //mark selected category active
            $(this).parent().addClass('active')
              .siblings().removeClass('active');

            toggleQuestions( bChecked );

          });

          // Toggle Question selection
          // 
          $('.js-btn-question-selection').on('click', function(e){

            e.preventDefault();

            var bChecked = $(this).data('checked') == true;

            toggleQuestions(bChecked);

          });


          // On Save Settings
          // 
          $('.js-save-question-selection').on('click', function(){

            var oSettings = getActiveFilters($('.js-detail-sidepanel'));

            // add category and question filters
            // 
            var aCategories = [],
            aQuestions = [];

            $('#select_categories_list .dropdown-item input:checked').each(function(){
              var sQid = $(this).parent().attr('data-active-qid');
              if (!!sQid) {
                aQuestions.push(sQid.split(','));
              }
              aCategories.push(this.value);
            });

            aQuestions = d3.merge(aQuestions);

            // add to filer
            // 
            oSettings.filters.push({
              name: 'category',
              values: aCategories
            });

            oSettings.filters.push({
              name: 'qid',
              values: aQuestions
            });

            dispatch.apply('filter', null, [oSettings]);

            // TODO - Save settings
            // 
            console.log('oSettings', oSettings);
          });

          function toggleQuestions(bChecked) {
            $('.js-modal-allquestion input[type=checkbox]').prop('checked', bChecked);
            updateQuestionSelection();
            updateQuestionCount();
          }

          function updateQuestionCount() {
            // Update count
            // 
            var tb = $('#select_questions_list tbody'),
            total = tb.children().length,
            selected = tb.find('input:checked').length;

            // find active category
            // 
            $('.js-category-question-panel .dropdown-item.active .q-count').html('('+selected+'/'+total+')');

          }

          /**
           * Stores current question selection in the active category dom
           * @return {[type]} [description]
           */
          function updateQuestionSelection() {
            // get active category
            // 
            var elCategory = $('#select_categories_list .dropdown-item.active'),
            elQuestions = $('#select_questions_list input:checked'),
            aQ = [];

            elQuestions.each(function(){
              aQ.push($(this).data('qid'));
            })

            elCategory.attr('data-active-qid', aQ.join(','));
          }

        });

      }


































      
    </script>
  </body>
</html>